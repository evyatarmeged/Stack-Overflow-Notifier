<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>cli</title>
</head>
<body>
    <!-- This is how you load jQuery in Electron -->
    <script>window.$ = window.jQuery = require('./js/jquery.min.js');</script>

    <div id="query-interval" hidden></div>
    <div id="tags" hidden></div>
    <div id="username" hidden></div>
    <div id="password" hidden></div>
    <div id="driver" hidden></div>
    <script>

	    const args = require('electron').remote.process.argv,
            program = require('commander'),
            YAML = require('yamljs');

        // TODO: Add new options: username, password, geckodriver/chromedriver path, config path, use-cfg (flag)
	    program
            .version('0.1.0')
            .option('-i, --interval <n>',
              'Interval in minutes to query Stackoverflow for new questions. max: 60, min: 0.5')
            // Optional
            .option('-t, --tags [tags]',
              'Tags to filter questions by. Must match tags from the SOF tag list.')
            .option('-u, --username [username]', 'Stackoverflow (Google) Username or Email')
            .option('-p, --password [password]', 'Stackoverflow (Google) Password')
            .option('-d, --driver [driver]', 'Gecko or Chrome driver path')
            .option('-c, --config', 'Config file path to read default arguments from')
            .parse(args);

	    let stackUser, stackPassword, stackDriver;

	    // A config YAML file can be passed to re-use user, pass, dpath

	    if (program.config)  {
            YAML.load(program.config)
              .then(nativeObj => {
                  stackUser = nativeObj.username;
                  stackPassword = nativeObj.password;
                  stackDriver = nativeObj.driver;
              })
              .catch(err => {
	              process.stdout.write(`${err}\r\n`);
	              window.close();
	              process.exit(1)
              })
        } else {
            stackUser = program.username;
            stackPassword = program.password;
            stackDriver = program.driver;
        }

        const stackInterval = program.interval,
            stackTags = program.tags;

        $('#query-interval').text(stackInterval)
        $('#tags').text(stackTags)
        $('#username').text(stackUser)
        $('#password').text(stackPassword)
        $('#driver').text(stackDriver)


    </script>
    <img src="images/sof.png" hidden>
    <script src="js/inquirer.js"></script>
</body>
</html>
